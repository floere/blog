<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <!-- BEGIN TUMBLR XML

        <?xml version="1.0" encoding="UTF-8"?>
        <post id="880306007" url="http://codeiscode.tumblr.com/post/880306007" url-with-slug="http://codeiscode.tumblr.com/post/880306007/unicorn-harakiri-rack-middleware-simple" type="regular" date-gmt="2010-07-30 16:49:00 GMT" date="Fri, 30 Jul 2010 12:49:00" unix-timestamp="1280508540" format="html" reblog-key="c0gUewAT" slug="unicorn-harakiri-rack-middleware-simple"><regular-title>Unicorn Harakiri Rack Middleware (simple)</regular-title><regular-body>&lt;p&gt;This is the simple Request counting Unicorn Harakiri Middleware.&lt;/p&gt;

&lt;p&gt;The idea is that the Unicorn child sends itself a QUIT signal after a given number of requests (50 as a default, set with after=). It will then finish the request, but shortly after die honorably. The Unicorn master will see that a child is missing, and fork a new one.&lt;/p&gt;

&lt;p&gt;Nature can be cruel.&lt;/p&gt;

&lt;p&gt;&lt;script src="http://gist.github.com/497539.js"&gt; &lt;/script&gt;&lt;/p&gt;

&lt;p&gt;That&amp;#8217;s it.&lt;/p&gt;</regular-body><tag>unicorn</tag><tag>rack</tag><tag>middleware</tag><tag>harakiri</tag><tag>seppuku</tag><tag>request-based</tag></post>

        END TUMBLR XML -->
    	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    	<meta name="generator" content="Tumblr Backup 0.3" />
    	<meta name="backup-date" content="Sun, 12 Dec 10 18:06:27 -0500" />
    	<link rel="stylesheet" href="../style.css"/>
    	<link rel="icon" href="../avatar.png"/>
    </head>
    <body class="regular_body">
                
        <div class="post_meta">
            <span class="timestamp">July 30, 2010, 12:49 pm</span>
            
        </div>
        
        <h1>Unicorn Harakiri Rack Middleware (simple)</h1><div><p>This is the simple Request counting Unicorn Harakiri Middleware.</p>

<p>The idea is that the Unicorn child sends itself a QUIT signal after a given number of requests (50 as a default, set with after=). It will then finish the request, but shortly after die honorably. The Unicorn master will see that a child is missing, and fork a new one.</p>

<p>Nature can be cruel.</p>

<p><script src="http://gist.github.com/497539.js"> </script></p>

<p>That&#8217;s it.</p></div>    </body>
</html>